# Tokenized ETF Frontend

## Overview

This React application presents the Tokenized ETF storyboard. It connects to the smart contracts deployed by the backend, renders onchain and offchain data, and walks through the workflow for tokenizing traditional ETF shares.

Key modules include:

- **Network Visualizer**: Animates stakeholders and asset flows across the demo steps.
- **Block Explorer**: Streams local blockchain activity.
- **CDP Registry**: Reads simulated custodial balances from the demo dataset.
- **dCDP Registry**: Queries TES3 and SGDC balances directly from the contracts.
- **Action Panels**: Triggers scripted actions such as create ETF, tokenize, onramp, buy, and sell.

## Technology Stack

- React 18
- ethers.js v6
- Framer Motion
- CSS Modules

## Setup

### Prerequisites

- Node.js 18 or later
- Local Anvil instance running at `http://localhost:8545`
- Deployed SGDC, TES3, and dCDP contracts (see backend instructions)

### Install Dependencies

```bash
cd frontend
npm install
```

### Configure Contract Addresses

Update `src/utils/constants.js` with the addresses emitted by the deployment script.

```javascript
export const CONTRACT_ADDRESSES = {
  SGDC: '0x...', // Address from backend/deployment-info.json
  TES3: '0x...',
  dCDP: '0x...',
};

export const ACCOUNTS = {
  AP: '0x...',        // Authorised participant
  THOMAS: '0x...',    // Retail investor
  ADMIN: '0x...',     // Platform administrator
  STABLECOIN_PROVIDER: '0x...', // SGDC minter
};
```

### Start the Development Server

```bash
npm start
```

The application opens at `http://localhost:3000`.

## Project Layout

```
frontend/
├── src/
│   ├── components/        UI components and layouts
│   ├── hooks/             Custom hooks for blockchain access
│   ├── utils/             Contract helpers and constants
│   ├── App.js             Application composition
│   └── index.js           Entry point
├── public/
│   └── api/cdp-registry.json  Demo registry data served over HTTP
└── package.json
```

## Component Notes

- **NetworkVisualizer** renders animated SVG with Framer Motion to show stakeholder relationships.
- **BlockExplorer** listens for new blocks and displays filtered events.
- **CDPRegistry** polls the JSON registry to keep traditional balances current.
- **dCDPRegistry** calls contracts through ethers.js to reflect onchain state.
- **ActionPanel** groups scripted demo actions for Thomas, the AP, and dCDP operations.

## Blockchain Integration

The app connects to Anvil and consumes contract ABIs generated by the backend build. It reads state, subscribes to events (`Transfer`, `Tokenized`, `WalletCreated`), and is structured to support transaction signing when demo keys are provided.

## Testing the Frontend

1. Start Anvil (`anvil`).  
2. Deploy the contracts using the backend script.  
3. Copy the deployed addresses into `constants.js`.  
4. Run `npm start`.  
5. Navigate to `http://localhost:3000` and step through the storyboard.

## Future Enhancements

- Add end-user facing error and status messaging.  
- Integrate MetaMask or a similar wallet for signing actions.  
- Surface transaction progress indicators.  
- Extend animation system for larger stakeholder networks.  
- Add loading states for all asynchronous panels.  
- Replace JSON polling with a backend API for registry updates.

## License

MIT — Demonstration and educational use only.
